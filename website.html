<!DOCTYPE html>
<html lang="en">
<head>
    <title>Text Highlighter & Haptic Feedback</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .highlighted { font-weight: bold; padding: 2px; }
        .yellow { background-color: yellow; }
        .red { background-color: red; color: white; }
        .blue { background-color: blue; color: white; }
        .green { background-color: green; color: white; }
    </style>
    <script>
        function highlightText(color) {
            let selectedText = window.getSelection().toString().trim();
            if (!selectedText) return;

            let span = document.createElement("span");
            span.className = `highlighted ${color}`;
            span.textContent = selectedText;

            let range = window.getSelection().getRangeAt(0);
            range.deleteContents();
            range.insertNode(span);

            console.log("Highlighted:", selectedText, "Color:", color);

            // Send request to backend with selected color
            fetch(`/haptic-feedback?color=${color}`);
        }

        function analyzeSentiment() {
            let note = document.getElementById("noteInput").value.trim();
            if (!note) {
                alert("Please enter a note.");
                return;
            }

            fetch("/analyze-sentiment", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ text: note })
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById("result").innerText = data;
            })
            .catch(error => console.error("Error:", error));
        }
    </script>
</head>
<body>
    <h2>Highlight Text & Trigger Haptic Feedback</h2>
    <p>Select text and click a color to highlight & trigger haptic feedback:</p>
    
    <button onclick="highlightText('yellow')">Yellow</button>
    <button onclick="highlightText('red')">Red</button>
    <button onclick="highlightText('blue')">Blue</button>
    <button onclick="highlightText('green')">Green</button>

    <p>Example paragraph: Highlight words here and assign different colors!</p>

    <h2>Write a Note for Sentiment Analysis</h2>
    <textarea id="noteInput" rows="4" cols="50" placeholder="Write something..."></textarea><br>
    <button onclick="analyzeSentiment()">Analyze Sentiment & Get Haptic Feedback</button>
    <p id="result"></p>
</body>
</html>
